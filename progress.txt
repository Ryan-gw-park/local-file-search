# Local Finder X v2.0 Progress Log

> This file tracks the progress of development sessions.
> AI agents should read this file at the start of each session to understand the current state.

---

## [2025-12-13] Initializer Session
- [COMPLETED] Folder restructure: v1 code archived to `_archive_v1/`, docs moved to `docs/`
- [COMPLETED] Created `init.sh` (environment setup script)
- [COMPLETED] Created `progress.txt` (this file)
- [COMPLETED] Created `feature_list.json` (Master Plan Phase 6 ê¸°ë°˜)
- [COMPLETED] Created `pyproject.toml` (dependency management)
- [COMPLETED] Created `src/` folder structure (Phase 1 Architecture)
- [PENDING] Git initial commit

---

## Next Session TODO
- [ ] PR#1: App Data Paths & Settings (`src/config/paths.py`, `src/config/settings.py`)
- [ ] PR#2: Data Schemas (FileRecord, ChunkRecord, Evidence, SearchResponse)

---

## [2025-12-13] Coding Session 1
- [COMPLETED] F001: App Data Paths (`src/config/paths.py`)
  - OS-specific paths for Windows/macOS/Linux
  - get_app_data_dir(), get_lancedb_path(), etc.
- [COMPLETED] F002: Settings Manager (`src/config/settings.py`)
  - Dataclass-based settings with JSON persistence
  - IndexingSettings, SearchSettings, UISettings, LicenseSettings
- [COMPLETED] F002: Data Schemas (`src/core/schemas.py`)
  - FileRecord, ChunkRecord, Evidence, SearchResponse
  - All tests passed âœ…

## Next Session TODO
- [ ] F003: Manifest Store (incremental indexing)
- [ ] F004: LanceDB Setup & Schema

---

## [2025-12-13] Coding Session 2
- [COMPLETED] F003: Manifest Store (`src/storage/manifest.py`)
  - FileFingerprint, Manifest dataclasses
  - ManifestStore singleton with load/save
  - compare_fingerprint(), get_files_to_reindex(), get_deleted_files()
  - All tests passed âœ…
- [COMPLETED] F004: LanceDB Store (`src/storage/lancedb_store.py`)
  - Schema definition (chunks, files tables)
  - LanceDBStore class with vector search
  - add_chunks, search_chunks, delete_chunks_by_file
  - Import OK âœ… (LanceDB dependency to be installed separately)

## Next Session TODO
- [ ] F005: VectorStore Adapter (wrapper for LanceDB)
- [ ] F006: BM25Store (persistent lexical index)

---

## [2025-12-13] Coding Session 3
- [COMPLETED] F005: VectorStore Adapter (`src/storage/vector_store.py`)
  - High-level wrapper for LanceDB
  - add_chunk(s), search, delete_by_file
  - Handles ChunkRecord serialization
  - Import OK âœ…
- [COMPLETED] F006: BM25Store (`src/storage/bm25_store.py`)
  - Persistent BM25 index with pickle
  - Supports chunk-level and file-level tokens
  - add_document(s), search, remove_by_file
  - Import OK âœ… (rank_bm25 dependency optional)

## Next Session TODO
- [ ] F007: File Enumeration + Filtering
- [ ] F008: File Type Classifier

---

## [2025-12-13] Coding Session 4
- [COMPLETED] F007: File Enumerator (`src/core/file_enumerator.py`)
  - Directory traversal with skip rules
  - EnumerationOptions for filtering
  - All tests passed âœ…
- [COMPLETED] F008: File Classifier (`src/core/file_classifier.py`)
  - Content-Indexed vs Metadata-Only classification
  - FileCategory and FileType enums
  - All tests passed âœ…
- [COMPLETED] F009: Extractors (`src/core/extractors/`)
  - WordExtractor, ExcelExtractor, PowerPointExtractor
  - PDFExtractor, TextExtractor, MarkdownExtractor
  - Registry pattern for extractor lookup
  - All imports OK âœ…

## Next Session TODO
- [ ] F010: Structural Chunker
- [ ] F011: Tokenizer (Kiwi + English)
- [ ] F012: Embedding Model Wrapper

---

## [2025-12-13] Coding Session 5
- [COMPLETED] F010: Structural Chunker (`src/core/chunker.py`)
  - File-type-specific chunking (PDF, PPT, Excel, Word/MD)
  - Location metadata (page, slide, sheet, header_path)
  - All tests passed âœ…
- [COMPLETED] F011: Tokenizer (`src/core/tokenizer.py`)
  - Korean (Kiwi) + English tokenization
  - Smart language detection
  - Import OK âœ… (kiwipiepy optional)
- [COMPLETED] F012: Embedding Model (`src/core/embedding.py`)
  - Singleton wrapper for SentenceTransformer
  - Device auto-detection (CUDA/MPS/CPU)
  - Import OK âœ… (sentence-transformers optional)

## Next Session TODO
- [ ] F013: Indexing Orchestrator (Controller)
- [ ] F014: Dense Retriever

---

## [2025-12-13] Coding Session 6
- [COMPLETED] F013: Indexing Orchestrator (`src/core/indexer.py`)
  - Full pipeline: enumerate â†’ extract â†’ chunk â†’ embed â†’ store
  - Incremental indexing with manifest
  - All tests passed âœ…
- [COMPLETED] F014-F019: Search Engine (`src/core/search_engine.py`)
  - Dense Retriever (vector similarity)
  - Lexical Retriever (BM25)
  - RRF Fusion (k=60)
  - Evidence Builder
  - SearchEngine (end-to-end)
  - All tests passed âœ…

## Next Session TODO
- [ ] Sprint 4: UI (F020-F027)

---

## [2025-12-13] Coding Session 7
- [COMPLETED] F020: Main Window (`src/ui/main_window.py`)
  - Global Sidebar with navigation
  - Page switching (Search, Indexing, About, MyPage)
  - Import OK âœ…
- [COMPLETED] F021-F024: Search Page 3-Panel (`src/ui/search_page.py`)
  - Left Panel: Results list with badges
  - Center Panel: Evidence cards
  - Right Panel: Query input with mode selector
  - Import OK âœ…
- [COMPLETED] F025: Indexing Page (`src/ui/indexing_page.py`)
  - Folder selection tree
  - File type filters
  - Progress bar
  - Import OK âœ…
- [COMPLETED] F026: About Page (`src/ui/about_page.py`)
  - App info and features
  - Import OK âœ…
- [COMPLETED] F027: My Page (`src/ui/mypage.py`)
  - License key input
  - Scope summary (Free/Pro)
  - Import OK âœ…

## Next Session TODO
- [ ] Sprint 5: Pro Features (F028-F032)
- [ ] Sprint 6: Packaging (F033-F034)

---

## [2025-12-13] Coding Session 8 (FINAL)
- [COMPLETED] F028: Outlook Connector (`src/connectors/outlook.py`)
  - MS Graph API OAuth 2.0 PKCE
  - Message fetch and search
  - Import OK âœ…
- [COMPLETED] F029: OneDrive Connector (`src/connectors/onedrive.py`)
  - File listing and search
  - Content download
  - Import OK âœ…
- [COMPLETED] F030: Audit Trail (`src/security/audit.py`)
  - Structured JSON logging
  - Daily log rotation
  - Import OK âœ…
- [COMPLETED] F031: PII Masking (`src/security/pii_masking.py`)
  - Regex-based detection
  - Email, phone, SSN, credit card, resident ID
  - PII test passed âœ…
- [COMPLETED] F032: License Gate (`src/security/license.py`)
  - Feature gating by tier
  - Import OK âœ…
- [COMPLETED] F033-F034: Packaging
  - build.sh (PyInstaller script)
  - requirements.txt (all dependencies)
  - Updated main.py with CLI fallback

## ğŸ‰ ALL 34 FEATURES COMPLETE! ğŸ‰

---

## Project Stats
- Total Features: 34
- Completed: 34 (100%)
- Git Commits: 8
- Lines of Code: ~5000+

---

## ğŸ”œ Sprint 7: UI Enhancement (v2.1)

### PRD ê¸°ë°˜ Indexing Page ê°œì„  ì‘ì—…

- [x] ~~F035: Folder Tree View with Checkboxes~~ (DEPRECATED â†’ F039)
- [x] F036: Metadata-Only File Type Filter
- [x] F037: Real-time File Count Display
- [x] F038: Indexing Page Layout Redesign
- [/] F039: Simplified Folder List (Option B) â† NEW

---

## [2025-12-13] Coding Session 9
- [COMPLETED] F035-F038: Indexing Page Enhancement (`src/ui/indexing_page.py`)
  - F035: CheckableFolderModel with tristate checkboxes
  - F036: "ê¸°íƒ€ íŒŒì¼(ë©”íƒ€ë°ì´í„°ë§Œ)" checkbox added
  - F037: Real-time file count summary
  - F038: Complete layout redesign with tree view
  - Import test âœ…

---

## [2025-12-13] Coding Session 10
- [ISSUE] Indexing Page UI ë¬¸ì œ ë°œê²¬
  - í´ë” íŠ¸ë¦¬ UI ë©ˆì¶¤ (os.walk ë¸”ë¡œí‚¹)
  - í´ë¼ìš°ë“œ í´ë” ì˜¤íƒ (Google Drive false positive)
  - Summary ë ˆì´ë¸” ì¤‘ì²© ë¬¸ì œ
- [DECISION] Option Bë¡œ ì „í™˜ ê²°ì •
  - ë³µì¡í•œ íŠ¸ë¦¬ ë·° â†’ ê°„ì†Œí™”ëœ í´ë” ë¦¬ìŠ¤íŠ¸

---

## [2025-12-13] Coding Session 11
- [COMPLETED] F039: Simplified Folder List Implementation
  - FolderListWidget êµ¬í˜„ (QListWidget ê¸°ë°˜)
  - í´ë” ì¶”ê°€: QFileDialogë¡œ ì„ íƒ
  - í´ë” ì‚­ì œ: ê°œë³„ ì‚­ì œ ë²„íŠ¼
  - CheckableFolderModel ì œê±°
  - í´ë¼ìš°ë“œ ê°ì§€ ë¡œì§ ì œê±°
  - Import test âœ…

---

## [2025-12-13] Coding Session 12
- [COMPLETED] F040: Pro Mode UI (`src/ui/indexing_page.py`)
  - Outlook ì´ë©”ì¼ ì²´í¬ë°•ìŠ¤ [PRO] í‘œì‹œ
  - í´ë¼ìš°ë“œ ì„¹ì…˜ (OneDrive) ì¶”ê°€
  - ì¸ë±ì‹± ì§„í–‰ ì¸ë””ì¼€ì´í„° ê°œì„  (íŒŒì¼ìˆ˜/ê²½ê³¼ì‹œê°„/ë„›ì§€)
  - Free ëª¨ë“œì—ì„œ ì ê¸ˆ ë° ì—…ê·¸ë ˆì´ë“œ ì•ˆë‚´
- [COMPLETED] F041: About Page v1 Restore (`src/ui/about_page.py`)
  - Why Product Exists / About / Key Differentiators
  - Security & Privacy (6ê°€ì§€ ë³´ì•ˆ í•­ëª©)
  - AI Model / Contact ì •ë³´

